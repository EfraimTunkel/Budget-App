<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="logo.png" type="image/png">
    <link rel="manifest" href="manifest.json" />
  <!-- Light theme color -->
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<!-- Dark theme color -->
<meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)">

    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./service-worker.js')
          .then(() => console.log('✅ Cash Rocket Service Worker registered!'))
          .catch(err => console.log('❌ Service Worker error:', err));
      }
    </script>
    
    <!-- Icons and Chart.js -->
    <script src="https://kit.fontawesome.com/66e3b24af0.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css" />
<script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>

    <title>Cash Rocket</title>
    <!-- Make sure your script is deferred so it runs after DOM is parsed -->
    <script type="module" src="app.js" defer></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>

 <!-- Auth Screen -->
<div id="auth-wrapper" class="auth-screen body">
  <div class="top-logo">
    <i class="fa-solid fa-rocket"></i>
    <span class="app-name">Cash Rocket</span>
  </div>
  <h2 id="app-tagline">Boost your budget</h2>
  <div id="auth-container">
    <button id="google-signin-button" class="social-btn" aria-label="Sign in with Google">
      <div class="social-btn-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
          <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path>
          <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path>
          <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path>
          <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path>
          <path fill="none" d="M0 0h48v48H0z"></path>
        </svg>
      </div>
      <span>Continue with Google</span>
    </button>
    <button id="microsoft-signin-button" class="social-btn microsoft" aria-label="Sign in with Microsoft">
      <div class="social-btn-icon">
        <img src="assets/microsoft-logo-light.png" alt="Microsoft Logo">
      </div>
      <span>Continue with Microsoft</span>
    </button>
    <button id="signup-button" class="btn-auth">Sign Up</button>
    <button id="login-button" class="btn-auth secondary">Log In</button>
  </div>
  <div id="loading-indicator" class="loading-indicator" style="display: none;">
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <div class="bottom-curve"></div>
      <div id="auth-modal" class="auth-modal hidden" role="dialog" aria-labelledby="form-title">
        <div class="modal-content">
          <button id="close-modal" class="close-btn" aria-label="Close modal">×</button>
          <h1 id="form-title" class="app-title"></h1>
          <p class="app-tagline">Take control of your finances.</p>
          <form id="auth-form">
            <div class="input-group">
              <label for="auth-email">Email Address*</label>
              <input id="auth-email" type="email" placeholder="Enter your email" required />
            </div>
            <div class="input-group">
              <label for="auth-password">Password*</label>
              <div class="password-wrapper">
                <input id="auth-password" type="password" placeholder="Enter your password" required />
                <button id="toggle-password-visibility" type="button" class="toggle-password">
                  <i class="fa-solid fa-eye"></i>
                </button>
              </div>
            </div>
            <button id="auth-button" type="submit" class="btn-auth"></button>
          </form>
          <p id="forgot-password-container">
            <button id="forgot-password-button" type="button" class="link-button">Forgot Password?</button>
          </p>
          <p class="tos-text">
            By proceeding you agree to our
            <a href="terms.html">Terms of Service</a> and
            <a href="privacy.html">Privacy Policy</a>.
          </p>
        </div>
      </div>
    </div>


    <!-- DASHBOARD CONTAINER -->
    <div id="dashboard-container" >
      <nav class="bottom-nav">
        <!-- Home (shown on all) -->
        <a class="nav-item show-on-all" id="home-button" aria-label="Go to dashboard">
          <div class="nav-icon-wrapper">
            <i class="fa-solid fa-house"></i>
          </div>
          <span class="nav-label">Home</span>
        </a>
      <!-- Settings (hidden on mobile, shown on desktop) -->
      <a  class="nav-item hide-on-mobile" id="settings-button">
        <i class="fa-solid fa-gear"></i><span>Settings</span>
      </a>

      <!-- Log Out (hidden on mobile, shown on desktop) -->
      <button id="logout-button" class="hide-on-mobile">
        Log Out
      </button>
        <!-- Budgets (shown on all) -->
        <a class="nav-item show-on-all" id="budgets-button" aria-label="View budgets">
          <div class="nav-icon-wrapper">
            <i class="fa-solid fa-wallet"></i>
          </div>
          <span class="nav-label">Budgets</span>
        </a>

        <!-- Transactions (shown on all) -->
        <a class="nav-item show-on-all" id="transactions-button" aria-label="Browse transactions">
          <div class="nav-icon-wrapper">
            <i class="fa-solid fa-list"></i>
          </div>
          <span class="nav-label">Transactions</span>
        </a>

        <!-- The floating add transaction button (shown on all) -->
        <button id="add-transaction-button" class="floating-button show-on-all" aria-label="Add a transaction">
          <i class="fa fa-plus"></i>
        </button>

        <!-- Profile icon (hidden on desktop, shown on mobile) -->
        <button
          type="button"
          class="profile-icon-container hide-on-desktop"
          id="mobile-profile-container"
          aria-label="View profile"
        >
          <div class="nav-icon-wrapper">
            <img src="default-avatar.png" alt="Profile Icon" id="mobile-profile-icon">
          </div>
          <span class="nav-label">Profile</span>
        </button>
      </nav>
      
      <nav class="sidebar collapsed" id="sidebar">
        <div class="sidebar-toggle" id="sidebar-toggle">
          <i class="fa-solid fa-chevron-left"></i>
        </div>
        <div class="sidebar-scroll">
          <a class="nav-item" id="home-button-desktop">
            <i class="fa-solid fa-house"></i><span>Home</span>
          </a>
          <a class="nav-item" id="budgets-button-desktop">
            <i class="fa-solid fa-wallet"></i><span>Budgets</span>
          </a>
          <a class="nav-item" id="transactions-button-desktop">
            <i class="fa-solid fa-list"></i><span>Transactions</span>
          </a>
          <a class="nav-item" id="settings-button-desktop">
            <i class="fa-solid fa-gear"></i><span>Settings</span>
          </a>
          <a class="nav-item" id="profile-button-desktop">
            <i class="fa-solid fa-user"></i><span>Profile</span>
          </a>
        </div>
        <div class="sidebar-footer">
          <button id="logout-button-desktop">
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>Log Out</span>
          </button>
        </div>
      </nav>
      
<!-- Desktop Button (updated id) -->
<button id="add-transaction-button-desktop" class="floating-button hide-on-mobile">
  <i class="fa fa-plus"></i>
</button>



      
      
      <main class="main-content" id="main-content">
        <!-- Dashboard Section -->
     <!-- Dashboard Section -->
     <section id="dashboard-section" class="section dashboard-section">
  <!-- Header / Greeting -->
  <header class="dashboard-header">
    <div class="user-info">
      <img id="user-profile-pic" src="default-avatar.png" alt="Profile Pic" />
      <div class="greeting-text">
        <h1 id="greeting"><span id="username-display">User</span></h1>
        <p>Your current balance: <span id="balance">$0.00</span></p>
      </div>
    </div>
  </header>

  <!-- Weekly Insights Card -->
  <div id="weekly-summary-card" ></div>

  <!-- Summary Boxes (Expense & Income) -->
  <section class="summary-boxes-section">
    <div class="summary-box expense-box">
      <h3>Expenses</h3>
      <div class="amount negative">$777.30</div>
      <div class="transactions-count">8 transactions</div>
    </div>
    <div class="summary-box income-box">
      <h3>Income</h3>
      <div class="amount positive">$265.00</div>
      <div class="transactions-count">2 transactions</div>
    </div>
  </section>

  <!-- Spending Overview (Moved Up) -->
  <section class="donut-chart-section">
    <h2>Spending Overview</h2>
    <div id="spending-chart" class="chart-canvas"></div>
  </section>

  <!-- Recent Transactions (Moved Up) -->
  <section id="transactions-sectionn" class="transactions-section">
    <h2>Recent Transactions</h2>
    <div class="recent-transactions-tabs">
      <button id="recent-all-tab" class="recent-tab active">All</button>
      <button id="recent-income-tab" class="recent-tab">Income</button>
      <button id="recent-expense-tab" class="recent-tab">Expense</button>
    </div>
    <div id="recent-transactions-list">
      <!-- Last 6 transactions injected here -->
    </div>
    <button id="view-all-transactions" class="view-all-btn">
      View All Transactions
    </button>
  </section>

  <!-- Line Chart (Moved Down) -->
  <section class="line-chart-section">
    <div id="balance-chart" class="chart-canvas"></div>
  </section>
</section>

<section id="transactions-section" class="section transactions-section hidden">
          <!-- Header: Title on left, icons on right -->
          <div class="transactions-header">
            <div class="transactions-title">
              <h2>Transactions</h2>
            </div>
            <div class="transactions-actions">
              <button id="download-transactions" class="btn-download">
                <i class="fa-solid fa-cloud-arrow-down"></i>
              </button>
              <button id="search-icon" class="icon-button">
                <i class="fa fa-search"></i>
              </button>
              <button id="filter-icon" class="icon-button">
                <i class="fa fa-filter"></i>
              </button>
            </div>
          </div>
        
          <!-- Search Bar Container (hidden by default) -->
          <div id="search-bar-container" class="search-bar-container hidden">
            <input type="text" id="search-bar" placeholder="Search transactions..." />
            <button id="clear-search" class="clear-button">
              <i class="fa fa-times"></i>
            </button>
          </div>

          <div id="filter-popup" class="filter-popup hidden">
            <div class="filter-popup-header">
              <h3>Filters</h3>
              <button id="close-filter-popup" class="close-filter-popup">&times;</button>
            </div>
          
            <div class="filter-content">
              <!-- Category Icons -->
              <div class="category-icons" id="filter-category-icons">
                <!-- Dynamically injected category icons -->
              </div>
          
              <div id="amount-slider" class="amount-slider"></div>
              <div class="range-values">
                <span id="amount-min-label">$0</span>
                <span id="amount-max-label">$1000</span>
              </div>
              
              <input type="hidden" id="filter-amount-min">
              <input type="hidden" id="filter-amount-max">
              
              <!-- Type Buttons -->
              <div class="type-chips">
                <button class="type-chip" data-type="Income">Income</button>
                <button class="type-chip" data-type="Expense">Expense</button>
              </div>
          
              <!-- Date Range -->
              <div class="date-range">
                <label>Date From</label>
                <input type="text" id="filter-date-from" class="custom-datepicker" readonly />
                <label>To</label>
                <input type="text" id="filter-date-to" class="custom-datepicker" readonly />
              </div>
          
              <!-- Title / Notes -->
              <input type="text" id="filter-title" placeholder="Title contains..." />
              <input type="text" id="filter-notes" placeholder="Notes contain..." />
          
              <!-- Footer Buttons -->
              <div class="filter-buttons">
                <button id="reset-filter" class="reset-button">Reset</button>
                <button id="apply-filter" class="apply-button">Apply</button>
              </div>
            </div>
          </div>
          
        
          <!-- Tabs for Transactions -->
          <div class="transactions-tabs">
            <button id="all-tab" class="transactions-tab active">All</button>
            <button id="income-tab-list" class="transactions-tab">Income</button>
            <button id="expense-tab-list" class="transactions-tab">Expense</button>
          </div>
        
          <!-- Container for Transaction Cards -->
          <section id="transactions-list-content" class="transactions-list">
            <!-- Transaction cards will be injected here by JS -->
          </section>
        </section>
        


<!-- ================== BUDGETS PAGE ================== -->
<section id="budgets-page" class="section budgets-page hidden">
  <header class="budgets-header">
    <h2>My Budgets</h2>
    <button id="add-budget-button" class="btn add-budget-button">
      <i class="fa-solid fa-plus"></i> New Budget
    </button>
  </header>
  <div class="budgets-grid">
    <!-- Budget cards will be dynamically inserted here -->
    <p class="no-budgets">No budgets available. Click “New Budget” to create one.</p>
  </div>
  <div id="abcd"></div>
</section>

<!-- ================= ADD/EDIT BUDGET MODAL ============== -->
<div id="add-budget-modal" class="modal hidden">
  <div class="modal-content add-budget-modal">
    <!-- Back Button (left side) -->
    <button class="back-button" id="back-button">
      <i class="fa-solid fa-chevron-left"></i>
    </button>

    <h2 id="budget-modal-title">Add New Budget</h2>
    
    <!-- Budget Type Tabs -->
    <div class="budget-type-tabs">
      <button
        id="budget-expense-tab"
        class="budget-tab expense active"
        data-type="expense"
      >
        Expense budget
      </button>
      <button
        id="budget-savings-tab"
        class="budget-tab savings"
        data-type="savings"
      >
        Savings budget
      </button>
    </div>
    
    <form id="add-budget-form">
      <!-- Row for Budget Name and Goal -->
      <div class="form-row" style="padding-right: 10px;">
        <div class="form-group">
          <label for="budget-name">Budget Name</label>
          <input
            type="text"
            id="budget-name"
            placeholder="e.g., Transportation"
            required
          />
        </div>
        <div class="form-group"  style="padding-left: 10px;" >
          <label for="budget-goal">Goal Amount ($)</label>
          <input
            type="number"
            id="budget-goal"
            placeholder="e.g., 500"
            step="0.01"
            required
          />
        </div>
      </div>
      
      <!-- Color Picker -->
      <div class="form-group color-picker-group">
        <label>Select Budget Color</label>
        <div class="color-palette">
          <!-- Add more colors as requested -->
          <span
            class="color-swatch selected"
            data-color="#4caf50"
            style="background-color: #4caf50;"
          ></span>
          <span
            class="color-swatch"
            data-color="#ff9800"
            style="background-color: #ff9800;"
          ></span>
          <span
            class="color-swatch"
            data-color="#2196f3"
            style="background-color: #2196f3;"
          ></span>
          <span
            class="color-swatch"
            data-color="#9c27b0"
            style="background-color: #9c27b0;"
          ></span>
          <span
            class="color-swatch"
            data-color="#f44336"
            style="background-color: #f44336;"
          ></span>
          <span
            class="color-swatch"
            data-color="#e91e63"
            style="background-color: #e91e63;"
          ></span>
          <span
            class="color-swatch"
            data-color="#ffeb3b"
            style="background-color: #ffeb3b;"
          ></span>
          <span
            class="color-swatch"
            data-color="#795548"
            style="background-color: #795548;"
          ></span>
          <span
            class="color-swatch"
            data-color="#607d8b"
            style="background-color: #607d8b;"
          ></span>
        </div>
        <input type="hidden" id="budget-color" value="#4caf50" />
      </div>
      
      <!-- Start & End Date Row -->
      <div class="form-row">
        <!-- START DATE (always visible) -->
        <div class="form-group">
          <label for="budget-start">Budget Start Date</label>
          <div class="calendar-input" id="calendar-input-start">
            <input
              type="text"
              id="budget-start"
              readonly
              placeholder="Select start date"
            />
            <i style="cursor: pointer;" class="fa-solid fa-calendar-days"></i>
          </div>
          <!-- If left blank, default to "today" in JS -->
        </div>

        <!-- END DATE (hidden unless "Set a Deadline?" is checked) -->
        <div class="form-group">
          <label for="enable-deadline" style="display: flex; cursor: pointer; align-items: center;">
            <input 
              type="checkbox" 
              id="enable-deadline" 
              style="margin-right: 8px;" 
            />
            Set a Deadline?
          </label>
          <!-- The actual end date input, hidden by default -->
          <div class="calendar-input hidden" id="calendar-input-end">
            <input
              type="text"
              id="budget-end"
              readonly
              placeholder="Select end date"
            />
            <i style="cursor: pointer;" class="fa-solid fa-calendar-days"></i>
          </div>
        </div>
      </div>
      
      <!-- Description -->
      <div class="form-group">
        <label for="budget-description">Description</label>
        <textarea
          id="budget-description"
          placeholder="Why are you saving?"
        ></textarea>
      </div>
      
      <!-- Attach Categories -->
      <div class="form-group">
        <label>Attach Categories</label>
        <div id="budget-categories" class="budget-categories">
          <!-- Category chips will be injected here -->
        </div>
      </div>
      
      <button type="submit" class="btn submit-btn">Save Budget</button>
    </form>
  </div>
</div>

<!-- ================== MATERIAL DATE PICKER ================== -->
<div id="mdp-overlay" class="mdp-overlay hidden">
  <div class="mdp-dialog">
    <div class="mdp-header">
      <h2 id="mdp-header-title">Select Date</h2>
      <p id="mdp-header-subtitle">Sat, Mar 1</p>
    </div>
    <div class="mdp-month-nav">
      <button id="mdp-prev-month" class="mdp-nav-btn">&lt;</button>
      <span id="mdp-month-year">March 2025</span>
      <button id="mdp-next-month" class="mdp-nav-btn">&gt;</button>
    </div>
    <div class="mdp-calendar-grid">
      <!-- 7 header cells (S, M, T, W, T, F, S) -->
      <div class="mdp-cell header">S</div>
      <div class="mdp-cell header">M</div>
      <div class="mdp-cell header">T</div>
      <div class="mdp-cell header">W</div>
      <div class="mdp-cell header">T</div>
      <div class="mdp-cell header">F</div>
      <div class="mdp-cell header">S</div>
      <!-- Date cells inserted via JS -->
    </div>
    <div class="mdp-footer">
      <button id="mdp-cancel" class="mdp-action-btn">CANCEL</button>
      <button id="mdp-ok" class="mdp-action-btn primary">OK</button>
    </div>
  </div>
</div>
<!-- Budget Details Popup -->
<div id="budget-details-popup" class="hidden">
  <div class="bdp-content">
    <!-- Popup Header -->
    <div class="bdp-header">
      <button id="bdp-back-button" class="bdp-btn bdp-btn-back">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <h2 id="bdp-title">Budget Title</h2>
      <button id="bdp-delete-button" class="bdp-btn bdp-btn-delete">
        <i class="fa fa-trash"></i>
      </button>
     
      
    </div>
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loader"></div>
    </div>
    
    <!-- Budget Info / Progress -->
    <div class="bdp-info">
      <p id="bdp-goal">Goal: $0.00</p>
      <div id="bdp-progress-bar" class="bdp-progress-bar">
        <div id="bdp-progress-fill" class="bdp-progress-fill"></div>
      </div>
      
      <p id="bdp-progress-text">0% of goal</p>
      <!-- The chart container -->
      <div id="bdp-chart" class="bdp-chart"></div>
    </div>

    <!-- Scrollable transaction list -->
    <div id="bdp-transactions-list" class="bdp-transactions-list">
      <!-- Transactions for this budget go here (in card style) -->
    </div>
  </div>
</div>

<!-- Delete Budget Confirmation Popup -->
<div id="delete-budget-popup" class="delete-confirmation-overlay hidden">
  <div class="delete-popup-content">
    <!-- Icon -->
    <div class="delete-popup-icon">
      <i class="fa fa-trash"></i>
    </div>

    <!-- Heading -->
    <h2>Delete Budget?</h2>

    <!-- Dynamic budget title -->
    <p id="delete-budget-message"></p>

    <!-- Buttons -->
    <div class="delete-popup-buttons">
      <button id="cancel-delete-budget" class="cancel-btn">Cancel</button>
      <button id="confirm-delete-budget" class="delete-btn">Delete</button>
    </div>
  </div>
</div>






    <!-- Profile Section (Full Page View) -->
    <section id="profile-section" class="section profile-section hidden">
  <div class="profile-page-content">
    <div class="profile-header">
      <!-- Left icon or placeholder (if you want something else here) -->
      <button id="profile-settings-button" class="profile-icon-button">
        <i class="fa-solid fa-gear"></i>
      </button>

   <!-- Centered avatar + info -->
<div class="profile-center">
  <img src="default-avatar.png" alt="Profile Photo" id="profile-page-photo">
  <div class="profile-info">
    <!-- This will be updated with the user's saved display name -->
    <h2 id="profile-name">Your Display Name</h2>
    <p id="profile-subtext">Basic Account</p>
  </div>
</div>


     
<button id="profile-logout-button" class="profile-icon-button">
  <i class="fa-solid fa-right-from-bracket"></i>
</button>
    </div>
    
    <!-- Profile grid of cards -->
  <!-- Profile grid of cards -->
<div class="profile-grid">
  <div class="profile-card" id="profile-card-premium">
    <i class="fas fa-star"></i>
    <span class="card-title">Premium</span>
    <p class="card-subtitle">Unlock extra features</p>
  </div>
  <div class="profile-card" id="profile-card-connect-bank">
    <i class="fas fa-university"></i>
    <span class="card-title">Connect Bank</span>
    <p class="card-subtitle">Link your bank for auto-updates</p>
  </div>
  <div class="profile-card" id="profile-card-wallets">
    <i class="fas fa-wallet"></i>
    <span class="card-title">Wallets</span>
    <p class="card-subtitle">Manage cash & cards</p>
  </div>
  <div class="profile-card" id="profile-card-categories">
    <i class="fas fa-folder"></i>
    <span class="card-title">Categories</span>
    <p class="card-subtitle">Organize your spending</p>
  </div>
  <div class="profile-card" id="profile-card-export-data">
    <i class="fas fa-file-export"></i>
    <span class="card-title">Export Data</span>
    <p class="card-subtitle">Download your history</p>
  </div>
  <div class="profile-card" id="profile-card-passcode">
    <i class="fas fa-lock"></i>
    <span class="card-title">Passcode</span>
    <p class="card-subtitle">Secure your access</p>
  </div>
  <div class="profile-card" id="profile-card-logs">
    <i class="fas fa-clipboard-list"></i>
    <span class="card-title">Activity</span>
    <p class="card-subtitle">Review your logs</p>
  </div>

</div>


  </div>
</section>





        </main>
      

    </div>
    
    <!-- ───────── Weekly Insights Popup ───────── -->
    <div id="insights-popup" class="insights-overlay hidden" role="dialog"
         aria-labelledby="insights-title" aria-modal="true">
    
      <div class="insights-content">
    
        <!-- ✕ CLOSE (sticky) -->
        <button id="close-insights-popup" class="insights-close"
                aria-label="Close Weekly Financial Insights">×</button>
    
        <!-- HEADER -->
        <header class="insights-header">
          <h2 id="insights-title"    class="insights-heading">Weekly Insights</h2>
          <p  id="insights-subtitle" class="insights-sub">Your summary for the week</p>
        </header>
    
        <!-- QUICK FACT BANNER -->
        <section class="insights-quickfact">
          <p id="insights-quickfact" class="insights-quickfact-text">
            <!-- injected by JS -->
          </p>
        </section>
    
        <!-- FIVE CORE STATS GRID -->
        <section class="insights-stats">
          <div id="insights-stats-grid" class="insights-stats-grid">
            <!-- injected by JS: 5 .insights-stat items -->
          </div>
        </section>
    
   <!-- ── BUDGET OVERVIEW GRID ── -->
<section class="insights-budgets" aria-label="Budget overview">
  <h3 class="insights-budgets-title">Budget Overview</h3>
  <div id="insights-grid" class="insights-grid">
    <!-- JS will inject up to 5 .insights-item donut cards here -->
  </div>
</section>

    
<section class="insights-budget-summary" aria-label="Budget Overview">
  <div class="budget-summary-card">
    <h3>
      <span id="budget-summary-amount"></span> left
    </h3>
    <p id="budget-summary-total"></p>
    <!-- give it an explicit width/height fallback -->
    <canvas id="budgetSummaryChart" width="300" height="120"></canvas>
  </div>
</section>


    
        <!-- INCOME VS EXPENSES CHART -->
        <section class="insights-comparison">
          <h3 class="insights-comparison-title">Income vs Expenses</h3>
          <canvas id="comparisonChart"></canvas>
        </section>
    
        <!-- FOOTER ACTIONS -->
        <footer class="insights-footer">
          <button id="insights-set-budget" class="insights-btn">
            <i class="fas fa-piggy-bank"></i>&nbsp;Set Budget
          </button>
          <button id="insights-share" class="insights-btn insights-btn-ghost"
                  aria-label="Share Weekly Financial Insights">
            <i class="fas fa-share-alt"></i>&nbsp;Share
          </button>
        </footer>
    
      </div>
    </div>
    





 <!-- TRANSACTION POPUP -->
<div id="cr-transaction-popup" class="popup hidden">
  <div class="popup-content transaction-container">
    <!-- Loading Spinner (hidden by default) -->
    <div id="transaction-loading" class="loading-spinner hidden">
      <div class="spinner"></div>
      <p>Saving...</p>
    </div>

<!-- New Button Header Section -->
<div class="button-header">
  <!-- Back Button (replacing Close Button) -->
  <button id="cr-close-transaction-popup" class="back-button">
    <i class="fa-solid fa-chevron-left"></i>
  </button>
  <!-- Delete Button -->
  <button id="delete-transaction-btn" class="delete-transaction-btn hidden">
    <i class="fa fa-trash"></i>
  </button>
</div>

    <!-- Header Section -->
    <div class="transaction-header">
      <div class="header-top">
        <!-- Toggle for Income / Expense -->
        <div class="toggle-buttons fancy-toggle">
          <button id="cr-income-tab" class="toggle-button active">Income</button>
          <button id="cr-expense-tab" class="toggle-button">Expense</button>
        </div>
        <!-- Real-time Clock -->
        <div class="transaction-clock" id="transaction-clock">--:--</div>
      </div>
      <!-- Big Amount Display -->
      <div class="header-amount">
        <span id="header-amount-text">$0</span>
      </div>
    </div>

    <!-- Body Section -->
    <div class="transaction-body">
      <!-- Date Label -->
      <div class="transaction-date">Today</div>
      <!-- INCOME FORM (active by default) -->
      <form id="cr-income-form" class="transaction-fields active">
        <input type="text" id="cr-income-title" placeholder="Title (e.g., Salary, Gift)" />
        <textarea id="cr-income-notes" placeholder="Notes (optional)"></textarea>
        <input type="number" id="cr-popup-income-amount" placeholder="Amount" step="0.01" required />
        <div class="category-wrapper">
          <button type="button" id="cr-select-income-category-btn" class="btn-category-select">
            Select Source
          </button>
          <input type="hidden" id="cr-chosen-income-category" />
          <span id="cr-chosen-income-category-text"></span>
        </div>
        <button type="submit" class="btn-primary">Save Income</button>
      </form>

      <!-- EXPENSE FORM (hidden initially) -->
      <form id="cr-expense-form" class="transaction-fields hidden">
        <input type="text" id="cr-expense-title" placeholder="Title (e.g., Groceries, Rent)" />
        <textarea id="cr-expense-notes" placeholder="Notes (optional)"></textarea>
        <input type="number" id="cr-popup-expense-amount" placeholder="Amount" step="0.01" required />
        <div class="category-wrapper">
          <button type="button" id="cr-select-expense-category-btn" class="btn-category-select">
            Select Category
          </button>
          <input type="hidden" id="cr-chosen-expense-category" />
          <span id="cr-chosen-expense-category-text"></span>
        </div>
        <button type="submit" class="btn-primary">Save Expense</button>
      </form>
    </div>
  </div>
</div>
<!-- CATEGORY SELECTION POPUP -->
<div id="cr-category-overlay" class="overlay hidden">
  <div class="thispopup">
    <button class="thisclose-btn" id="cr-close-category-popup">&times;</button>

    <div class="category-tabs">
      <div id="cr-cat-income-tab" class="category-tab income-tab">Income</div>
      <div id="cr-cat-expense-tab" class="category-tab active">Expense</div>
    </div>

    <!-- Place the plus button inside #cr-category-list -->
    <div id="cr-category-list" class="category-list">
      <button id="cr-show-add-cat-form" class="add-cat-button">+</button>
      <!-- Categories will be injected here -->
    </div>
  </div>
</div>

<!-- FULL-SCREEN ADD NEW CATEGORY POPUP -->
<div id="cr-add-cat-form" class="add-cat-form hidden">
  <button id="cr-close-add-cat-form" class="thisclose-btn">&times;</button>
  <div class="add-cat-top">
    <div class="preview-icon">
      <img src="default-preview.png" alt="Category Preview" id="cat-preview-img" />
    </div>
    <div class="cat-name-section">
      <input type="text" id="cr-new-cat-name" placeholder="Name" />
      <div class="color-palette" id="color-palette">
        <div class="color-circle" data-color="#4CAF50"></div>
        <div class="color-circle" data-color="#26a69a"></div>
        <div class="color-circle" data-color="#03a9f4"></div>
        <div class="color-circle" data-color="#2196f3"></div>
        <div class="color-circle" data-color="#3f51b5"></div>
        <div class="color-circle" data-color="#673ab7"></div>
        <div class="color-circle" data-color="#9c27b0"></div>
        <div class="color-circle" data-color="#ff9800"></div>
        <div class="color-circle" data-color="#ff5722"></div>
        <div class="color-circle" data-color="#795548"></div>
        <div class="color-circle" data-color="#607d8b"></div>
      </div>
    </div>
  </div>
  <div id="cr-icons-grid" class="icons-grid">
    <!-- Icons injected via JavaScript -->
  </div>
  <button id="cr-save-new-cat-btn" class="save-cat-btn">Save</button>
</div>


<div id="discard-popup" class="discard-popup hidden">
  <div class="popup-ccontent discard-popup-content">
    <div class="discard-icon">
      <i class="fa-solid fa-triangle-exclamation"></i>
    </div>
    <h2>Discard Changes?</h2>
    <p>Are you sure you want to discard your changes?</p>
    <div class="discard-buttons">
      <button id="discard-cancel-btn" class="btn-cancel">Cancel</button>
      <button id="discard-confirm-btn" class="thisisbtn-primary">Discard</button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Overlay (placed outside the transaction popup) -->
<div id="delete-confirmation-overlay" class="delete-confirmation-overlay hidden">
  <div class="delete-popup-content">
    <!-- Big trash icon at top -->
    <div class="delete-popup-icon">
      <i class="fa fa-trash"></i>
    </div>
    <!-- Heading -->
    <h2>Delete Transaction?</h2>
    <!-- Subtext: fill with the transaction title or anything else you want -->
    <p id="delete-transaction-title"></p>
    <!-- Buttons row -->
    <div class="delete-popup-buttons">
      <button id="cancel-delete-btn" class="cancel-btn">Cancel</button>
      <button id="confirm-delete-btn" class="delete-btn">Delete</button>
    </div>
  </div>
</div>



<!-- Categories Full Page (initially hidden) -->
<div id="categories-full-page" class="full-page">
  <header class="full-page-header">
    <button id="back-from-categories" class="back-button"><i class="fa-solid fa-chevron-left"></i></button>
    <h2>Categories</h2>
  </header>
  
  <div id="categories-content">
    <!-- Loaded dynamically -->
  </div>
</div>

<!-- Export data page-->
<section id="export-data-page" class="full-page hidden">
  <div class="full-page-header">
    <button class="back-button" id="back-from-export"><i class="fa-solid fa-chevron-left"></i></button>
    <h2>Export Your Data</h2>
  </div>
  <div id="export-data-content">
    <p>You can download all your transactions below.</p>
    <button id="download-all-data" class="btn-profile">
      <i class="fas fa-file-download"></i> Download CSV
    </button>
  </div>
</section>



<!-- Inside <main class="main-content"> -->
  <section id="wallet-page-section" class="full-page">
    <header class="wallet-page-header">
      <button id="wallet-back-btn" class="wallet-close-btn" aria-label="Back to Profile">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <div class="wallet-header-content">
        <h2>Wallets</h2>
        <div class="wallet-summary-bar">
          <div class="wallet-summary-item">
            <span>Total:</span>
            <span id="wallet-total-balance">$0.00</span>
          </div>
          <div class="wallet-summary-item">
            <span>Accounts:</span>
            <span id="wallet-account-count">0</span>
          </div>
        </div>
      </div>
      <button id="wallet-add-account-btn-header" class="wallet-header-add-btn" aria-label="Add New Account">
        <i class="fas fa-plus"></i>
      </button>
    </header>
    <div class="wallet-search-bar">
      <div class="wallet-search-container">
        <button id="wallet-search-toggle-btn" class="wallet-search-toggle-btn" aria-label="Toggle Search">
          <i class="fas fa-search"></i>
        </button>
        <input type="text" id="wallet-search-input" class="wallet-search-input hidden" placeholder="Search accounts..." aria-label="Search accounts" />
      </div>
    </div>
    <div id="wallet-content-area">
      <div class="wallet-account-list" id="wallet-account-list" role="list"></div>
      <button id="wallet-add-account-btn" class="wallet-fab-btn" aria-label="Add New Account">
        <i class="fas fa-plus"></i>
      </button>
    </div>
  </section>
  
  <!-- Outside <main>, with other popups -->
  <div id="wallet-add-account-overlay" class="wallet-overlay hidden" role="dialog" aria-labelledby="wallet-add-account-title" aria-modal="true">
    <div class="wallet-overlay-box">
      <button id="wallet-close-add-account-overlay" class="wallet-close-btn" aria-label="Close Overlay">
        <i class="fa-solid fa-times"></i>
      </button>
      <h2 id="wallet-add-account-title">Add New Account</h2>
      <form id="wallet-add-account-form">
        <div class="wallet-form-group">
          <label for="wallet-account-name-input">Account Name</label>
          <input type="text" id="wallet-account-name-input" required placeholder="e.g., My Checking" aria-required="true" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-account-type-select">Account Type</label>
          <select id="wallet-account-type-select" required aria-required="true">
            <option value="checking">Checking</option>
            <option value="savings">Savings</option>
            <option value="cash">Cash</option>
          </select>
        </div>
        <div class="wallet-form-group">
          <label for="wallet-account-number-input">Last 4 Digits (Optional)</label>
          <input type="text" id="wallet-account-number-input" maxlength="4" placeholder="e.g., 1234" pattern="[0-9]{4}" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-initial-balance-input">Initial Balance</label>
          <input type="number" id="wallet-initial-balance-input" step="0.01" required placeholder="0.00" aria-required="true" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-account-goal-input">Savings Goal (Optional)</label>
          <input type="number" id="wallet-account-goal-input" step="0.01" placeholder="e.g., 1000.00" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-budget-limit-input">Monthly Budget Limit (Optional)</label>
          <input type="number" id="wallet-budget-limit-input" step="0.01" placeholder="e.g., 500.00" />
        </div>
        <button type="submit" class="wallet-submit-btn" id="wallet-save-account-btn">
          <span>Save Account</span>
          <div class="wallet-spinner"></div>
          <i class="fas fa-check wallet-success-check"></i>
        </button>
      </form>
    </div>
  </div>
  
  <div id="wallet-account-details-overlay" class="wallet-overlay hidden" role="dialog" aria-labelledby="wallet-account-details-title" aria-modal="true">
    <div class="wallet-overlay-box">
      <button id="wallet-close-account-details-overlay" class="wallet-close-btn" aria-label="Close Account Details">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <h2 id="wallet-account-details-title"></h2>
      <div class="wallet-account-details">
        <div class="wallet-details-header">
          <div class="wallet-account-icon"><i class="fas fa-wallet"></i></div>
          <div class="wallet-account-info">
            <p class="wallet-account-balance"></p>
            <p class="wallet-account-number"></p>
          </div>
        </div>
        <div class="wallet-actions">
          <button id="wallet-edit-account-btn" class="wallet-action-btn" aria-label="Edit Account">
            <i class="fas fa-edit"></i> Edit
          </button>
          <button id="wallet-delete-account-btn" class="wallet-action-btn wallet-action-btn-danger" aria-label="Delete Account">
            <i class="fas fa-trash"></i> Delete
          </button>
        </div>
        <div class="wallet-transactions-list" id="wallet-transactions-list">
          <h3>Recent Transactions</h3>
          <ul id="wallet-transactions-list-items"></ul>
          <a href="#" class="wallet-view-all">View All</a>
        </div>
        <button id="wallet-transfer-from-account-btn" class="wallet-transfer-btn" aria-label="Transfer Funds">
          <i class="fa-solid fa-money-bill-transfer"></i> Transfer
        </button>
      </div>
    </div>
  </div>
  
  <div id="wallet-edit-account-overlay" class="wallet-overlay hidden" role="dialog" aria-labelledby="wallet-edit-account-title" aria-modal="true">
    <div class="wallet-overlay-box">
      <button id="wallet-close-edit-account-overlay" class="wallet-close-btn" aria-label="Close Overlay">
        <i class="fa-solid fa-times"></i>
      </button>
      <h2 id="wallet-edit-account-title">Edit Account</h2>
      <form id="wallet-edit-account-form">
        <div class="wallet-form-group">
          <label for="wallet-edit-account-name-input">Account Name</label>
          <input type="text" id="wallet-edit-account-name-input" required placeholder="e.g., My Checking" aria-required="true" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-edit-account-type-select">Account Type</label>
          <select id="wallet-edit-account-type-select" required aria-required="true">
            <option value="checking">Checking</option>
            <option value="savings">Savings</option>
            <option value="cash">Cash</option>
          </select>
        </div>
        <div class="wallet-form-group">
          <label for="wallet-edit-account-number-input">Last 4 Digits (Optional)</label>
          <input type="text" id="wallet-edit-account-number-input" maxlength="4" placeholder="e.g., 1234" pattern="[0-9]{4}" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-edit-initial-balance-input">Balance</label>
          <input type="number" id="wallet-edit-initial-balance-input" step="0.01" required placeholder="0.00" aria-required="true" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-edit-account-goal-input">Savings Goal (Optional)</label>
          <input type="number" id="wallet-edit-account-goal-input" step="0.01" placeholder="e.g., 1000.00" />
        </div>
        <div class="wallet-form-group">
          <label for="wallet-edit-budget-limit-input">Monthly Budget Limit (Optional)</label>
          <input type="number" id="wallet-edit-budget-limit-input" step="0.01" placeholder="e.g., 500.00" />
        </div>
        <button type="submit" class="wallet-submit-btn" id="wallet-update-account-btn">
          <span>Update Account</span>
          <div class="wallet-spinner"></div>
          <i class="fas fa-check wallet-success-check"></i>
        </button>
      </form>
    </div>
  </div>
  
  <div id="wallet-transfer-overlay" class="wallet-overlay hidden" role="dialog" aria-labelledby="wallet-transfer-title" aria-modal="true">
    <div class="wallet-overlay-box">
      <button id="wallet-close-transfer-overlay" class="wallet-close-btn" aria-label="Close Overlay">
        <i class="fa-solid fa-times"></i>
      </button>
      <h2 id="wallet-transfer-title">Transfer Funds</h2>
      <div class="wallet-transfer-details" id="wallet-transfer-details"></div>
      <form id="wallet-transfer-form">
        <div class="wallet-form-group">
          <label for="wallet-transfer-from-select">From Account</label>
          <select id="wallet-transfer-from-select" required aria-required="true"></select>
        </div>
        <div class="wallet-form-group">
          <label for="wallet-transfer-to-select">To Account</label>
          <select id="wallet-transfer-to-select" required aria-required="true"></select>
        </div>
        <div class="wallet-form-group">
          <label for="wallet-transfer-amount-input">Amount</label>
          <input type="number" id="wallet-transfer-amount-input" step="0.01" required placeholder="0.00" aria-required="true" />
        </div>
        <button type="submit" class="wallet-submit-btn" id="wallet-transfer-btn">
          <span>Transfer</span>
          <div class="wallet-spinner"></div>
          <i class="fas fa-check wallet-success-check"></i>
        </button>
      </form>
    </div>
  </div>
  
  <div id="wallet-alert-overlay" class="wallet-overlay hidden" role="alertdialog" aria-labelledby="wallet-alert-title" aria-modal="true">
    <div class="wallet-overlay-box">
      <p id="wallet-alert-message"></p>
      <button id="wallet-alert-ok-btn" class="wallet-alert-btn">OK</button>
    </div>
  </div>







<!-- LOGS POPUP -->
<div id="logs-popup" class="popup hidden">
  <div class="popup-content logs-popup-content">
    <button id="close-logs-popup" class="cclose-button">&times;</button>
    <h2>Activity Logs</h2>
    <div id="logs-container">
      <!-- Example log item structure -->
      <div class="log-item">
        <span class="timestamp">Apr 6, 2025 - 3:45 PM</span>
        <span class="log-message">User logged in from Chrome (Windows)</span>
      </div>
    </div>
  </div>
</div>



<!-- SETTINGS MODAL -->
<div id="settings-modal" class="modal hidden">
  <div class="modal-content">
    <!-- Close button -->
    <button id="close-settings-icon" class="close-button">&times;</button>
    <h2 id="settingsh2">Settings</h2>

    <!-- Profile Section -->
    <div class="settings-section">
      <h3>Profile</h3>
      <!-- Only one upload control: the label triggers the hidden file input -->
      <label for="profile-pic-input" class="custom-file-label">Choose Image</label>
      <input type="file" id="profile-pic-input" accept="image/*" style="display:none;" />
      <img id="profile-pic-preview" src="default-avatar.png" alt="Profile Preview" style="width:100px; height:100px; border-radius:50%;" />
      
      <label id="username-display" for="display-name-input">Display Name:</label>
      <input type="text" id="display-name-input" />
    </div>
    
    
    <!-- Appearance Section -->
    <div class="settings-section">
      <h3>Appearance</h3>
      <label class="switch">
        <input type="checkbox" id="theme-toggle" />
        <span class="slider round"></span>
      </label>
    </div>
    

    <!-- Notification Preferences Section -->
    <div class="settings-section">
      <h3 id="Notifications" >Notifications</h3>
      <label>
        <input type="checkbox" id="email-notifications" />
        Email Notifications
      </label>
      <label>
        <input type="checkbox" id="push-notifications" />
        Push Notifications
      </label>
    </div>

    <!-- Currency Preference Section -->
    <div class="settings-section">
      <h3>Currency</h3>
      <select id="currency-select">
        <option value="USD">USD - US Dollar</option>
        <option value="EUR">EUR - Euro</option>
        <option value="GBP">GBP - British Pound</option>
      </select>
    </div>
    
    <!-- Account Management Section -->
    <div class="settings-section">
      <h3>Account Management</h3>
      <button id="reset-password-button">Reset Password</button>
      <button id="delete-account-button">Delete Account</button>
    </div>
    
    <!-- Modal Buttons & Loading Indicator -->
    <div class="modal-buttons">
      <button id="save-settings">Save Settings</button>
      <button id="close-settings">Cancel</button>
      <div id="loading-overlay" class="loading-overlay hidden">
        <span class="loader"></span>
      </div>
      
      
      
      
</div>

<!-- CONFIRM DELETION POPUP -->
<div id="confirm-deletion-popup" class="popup hidden">
  <div class="popup-content" style="max-width:400px;">
    <button id="close-deletion-popup" class="close-button">&times;</button>
    <h2>Confirm Deletion</h2>
    <p>Please enter your current password to delete your account.</p>
    <input type="password" id="delete-account-password" placeholder="Current password" />
    <button id="confirm-delete-button">Confirm Delete</button>
  </div>
</div>










  </body>
</html>